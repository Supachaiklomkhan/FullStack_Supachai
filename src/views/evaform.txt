<template>
    <div 
        style="font-family: 'Prompt', sans-serif; display: flex; flex-direction: column; align-items: center; margin-top: 40px;">
        
        
        <button v-if="!isEvaluating" @click="startEvalution" style="margin-bottom: 20px; padding: 8px 16px;">
          เริ่มต้นการประเมิน
        </button>



        <div v-if="isEvaluating">
            <table border="1" cellpadding="8" style="border-collapse: collapse; text-align: center;">
                <thead>
                    <tr>
                        <th>ลำดับ</th>
                        <th>ชื่อพนักงาน</th>
                        <th>ตำแหน่ง</th>
                        <th>คะแนนประเมิน</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="(employee, index) in employees" :key="employee.id"
                    :style="{ backgroundColor: getRowColor(employee.score) }">
                    <td>{{ index + 1 }}</td>
                    <td>{{ employee.name }}</td>
                    <td>{{ employee.position }}</td>
                    <td>
                        <input type="number" v-model.number="employee.score" min="0" max="100" />
                    </td>
                    </tr>
                </tbody>
            </table>
            <button @click="saveAllScores" style="margin-top: 20px; padding: 8px 16px;">
                บันทึกคะแนนทั้งหมด
            </button>

            <div style="margin-top: 16px;">
                <strong>คะแนนเฉลี่ย: </strong>{{ averageScore.toFixed(2) }}
            </div>
        </div>
      </div>
</template>

<script>
export default{
    data() {
        return {
           isEvaluating: false,
           employees: [
            { id: 1, name: 'สมชาย', position: 'วิศวกร', score: 0},
            { id: 2, name: 'สมหญิง', position: 'ผู้จัดการ', score: 0},
            { id: 3, name: 'สมปอง', position: 'นักวิเคราะห์', score: 0},
            { id: 4, name: 'สมศรี', position: 'เจ้าหน้าที่', score: 0}
           ]
        };
    },
computed: {
    averageScore() {
            if (this.employees.length == 0) return 0;
            const total = this.employees.reduce((sum, emp) => sum + emp.score, 0);
            return total / this.employees.length;
        }
    },
methods: {
    startEvalution() {
            this.isEvaluating = true;
        },
    getRowColor(score) {
            if (score < 70) return '#f8d7da'; //
            if (score >= 70 && score < 80) return '#fff3cd';
            return '#d4edda';
        },
    saveAllScores() {
        let message = 'บันทึกคะแนนทั้งหมด:\n';
        this.employees.forEach(emp => {
            message += `${emp.name}: ${emp.score}\n`;
            });
            alert(message);
        }
    }
};
</script>